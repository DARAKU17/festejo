{% extends 'events/base.html' %}

{% block title %}My Tickets | CampusHub{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto space-y-12 pb-20">
    <div class="space-y-2 px-2">
        <h1 class="text-4xl font-black italic tracking-tighter text-gray-900">My Tickets</h1>
        <p class="text-xs font-bold uppercase tracking-widest text-gray-400">Manage your event registrations and
            downloads</p>
    </div>

    <div class="grid gap-6">
        {% for ticket in tickets %}
        <div
            class="bg-white rounded-[2.5rem] border border-gray-100 shadow-xl shadow-gray-200/40 p-8 flex flex-col md:flex-row items-center gap-8 group hover:border-primary/20 transition-all duration-500">
            <!-- Event Mini Image/Icon -->
            <div class="w-32 h-32 rounded-3xl overflow-hidden flex-shrink-0 bg-gray-50 border border-gray-100">
                {% if ticket.event.image %}
                <img src="{{ ticket.event.image.url }}"
                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
                {% else %}
                <div class="w-full h-full flex items-center justify-center text-gray-200">
                    <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
                        </path>
                    </svg>
                </div>
                {% endif %}
            </div>

            <!-- Content -->
            <div class="flex-grow space-y-3 text-center md:text-left">
                <div class="space-y-1">
                    <span
                        class="text-[10px] font-black uppercase tracking-widest text-primary bg-primary-soft px-3 py-1 rounded-full border border-primary/10">Registered</span>
                    <h2 class="text-2xl font-black italic tracking-tight text-gray-900 leading-tight">
                        {{ ticket.event.title }}
                    </h2>
                </div>

                <div class="flex flex-col md:flex-row md:items-center gap-3 text-gray-500">
                    <div class="flex items-center justify-center md:justify-start space-x-2">
                        <svg class="w-4 h-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                            </path>
                        </svg>
                        <span class="text-[10px] font-bold uppercase tracking-wider">
                            {{ ticket.event.event_date|date:"M j, Y" }}
                        </span>
                    </div>
                    <div class="hidden md:block w-1 h-1 rounded-full bg-gray-200"></div>
                    <div class="flex items-center justify-center md:justify-start space-x-2">
                        <svg class="w-4 h-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="text-[10px] font-bold uppercase tracking-wider">
                            {{ ticket.event.event_date|date:"g:i A" }}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="flex flex-col items-stretch space-y-2 flex-shrink-0 w-full md:w-auto">
                <form action="{% url 'register_event' ticket.event.id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit"
                        class="w-full px-6 py-3 bg-primary text-white text-[10px] font-black uppercase tracking-widest rounded-2xl hover:bg-primary-light transition-all active:scale-95 shadow-xl shadow-primary/20 flex items-center justify-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                        </svg>
                        <span>Ticket</span>
                    </button>
                </form>
                <a href="{% url 'event_detail' ticket.event.id %}"
                    class="px-6 py-2 border border-gray-100 text-gray-400 text-[10px] font-black uppercase tracking-widest rounded-2xl hover:bg-gray-50 text-center">
                    Details
                </a>
            </div>
        </div>
        {% empty %}
        <div class="py-32 text-center space-y-6">
            <div class="w-24 h-24 bg-gray-50 rounded-full flex items-center justify-center mx-auto text-gray-200">
                <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z">
                    </path>
                </svg>
            </div>
            <div class="space-y-2">
                <h3 class="text-2xl font-black italic tracking-tight">No tickets found.</h3>
                <p class="text-gray-400 text-sm font-medium">Browse the feed to discover and join amazing campus events!
                </p>
            </div>
            <a href="{% url 'home' %}"
                class="inline-flex px-8 py-4 bg-primary text-white text-xs font-black uppercase tracking-widest rounded-full shadow-2xl shadow-primary/30 hover:bg-primary-light transition-all">
                Discover Events
            </a>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}